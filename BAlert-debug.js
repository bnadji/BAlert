var BAlert=function(t,e,n,i,o){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)});var a=this;BAlert.alertArray=BAlert.alertArray||[];var r=B(BAlert.alertArray)?1:BAlert.alertArray.slice(-1).pop().alertNum()+1;BAlert.alertArray.push(a);var s="A"+r,l="ALERT "+r,c=!1,u=null,d=null,f=D(),v={};b(t)?f.content=P(f.content,t):t&&(f.content.raw=t),"number"==typeof e&&(f.timeout=e),b(n)?f.title=P(f.title,n):n&&(f.title.raw=n),!y(i)&&b(i)&&(i=[i]),f.mainButtons=P(f.mainButtons,i),f=P(f,o);var p=1,m=2,h=4,g=8,x=16;function D(){return{position:{X:"c",Y:"15%",staggerX:"~5px",staggerY:"5px"},size:{X:0,Y:0,calcX:null,calcY:null},title:{},content:{size:{X:0,Y:0,calcX:null,calcY:null}},mainButtons:[],exitButton:{icon:null,raw:null,text:"&times;",inlineStyle:"",threshold:3e3,visible:function(){return 0===f.timeout||f.timeout>f.exitButton.threshold}},animStart:{duration:250,delay:0,dir:"top",scale:0,rotate:0,func:"ease-in"},animExit:{duration:350,delay:0,dir:"none",scale:0,rotate:0,func:"ease-out"},callbacks:{onDisplayBegin:null,onDisplayEnd:null,onExitBegin:null,onExitEnd:null,onResize:function(){K()},onTapOutside:function(t){return function(t){t!==BAlert.alertArray[BAlert.alertArray.length-1]||c||(E(p,"IS THE LAST ALERT ON THE STACK -- REMOVING"),it())}(t),!1},onTapInside:null},classPrefix:"bajs_",defaultClasses:{apply:!0,values:{containerDiv:"",alertBoxDiv:"border-radius:0.5rem;width:fit-content;max-width:80%;max-height:80%;font:1rem arial;border:1px solid;background-color:#eee;box-shadow:0px 10px 45px -2px rgba(0,0,0,0.75);",titleDiv:"padding:0.1rem .3rem .3rem;text-align:center",titleIcon:"vertical-align:middle;width:1.5rem;height:1.5rem;margin-top:2px",titleText:"vertical-align:middle;margin-left:2px;font-size:1rem;font-weight:bold",contentDiv:"display:flex;clear:both;padding:0.5rem;overflow:auto",contentIcon:"vertical-align:middle; margin-right:0.5rem;width:1rem;height:1rem;",contentText:"vertical-align:middle; display:table-cell;font-size:1rem",exitButton:"float:right;border:0;padding:0;line-height:0.8rem;background:transparent",exitButtonIcon:"width:1rem;height:1rem",exitButtonText:"font-size:1rem;line-height:0.5rem;vertical-align:top",mainButtonsDiv:"clear:both;text-align:center;padding:0.35rem;display:flow-root",mainButtonsIcon:"vertical-align:middle;width:1rem;height:1rem;margin-right:2px",mainButtonsText:"vertical-align:middle;margin:0 2px",mainButtons:"border-radius:0.5rem;padding:2px;margin: 0.1rem 0.2rem;font-size:0.85rem"}},inlineStyles:{containerDiv:"",alertBoxDiv:"",titleDiv:"",titleIcon:"",titleText:"",contentDiv:"",contentIcon:"",contentText:"",exitButton:"",mainButtonsDiv:"",exitButtonIcon:"",exitButtonText:"",mainButtons:"",mainButtonsIcon:"",mainButtonsText:""},iconsPath:"",startingZIndex:1e3,timeout:0,DEBUG:0}}function E(t,e){f.DEBUG&t&&console.log(l+" "+e)}function B(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function T(t){return t===Object(t)}function y(t){return Array.isArray(t)}function b(t){return T(t)&&!B(t)}function A(t){return v[t]&&v.splice(v.indexOf(t),1),document.body.contains(t)?t.parentNode.removeChild(t):null}function I(t,e,n){window.addEventListener?window.addEventListener(t,e,n):window.attachEvent&&window.attachEvent("on"+t,e),E(p,"WINDOW CALLBACK ADDED: "+t)}function w(t,e){window.removeEventListener?window.removeEventListener(t,e):window.detachEvent&&window.detachEvent("on"+t,e),E(p,"WINDOW CALLBACK REMOVED: "+t)}function O(t){return t?(E(p,"SETTING SELF-DESTRUCT TIMER ("+t+"msec)"),setTimeout(function(){it()},t)):null}function C(t,e){t&&(E(p,"CALLBACK CALLED: "+e),t(a))}function S(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function N(t){var e=(t=t||v.alertBoxDiv).getBoundingClientRect();return[e.width,e.height]}function z(t){var e=(t=t||v.alertBoxDiv).getBoundingClientRect();return[e.left,e.top]}function k(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function R(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function L(t,e,n){["","-webkit-","-moz-","-ms-","-o-"].forEach(function(i){t.style.setProperty(i+e,n)})}function X(t,e){t=t||v.alertBoxDiv,E(p,"OPACITY: "+(e=e||.5)),t.style.opacity=e}function Y(t,e){t=t||v.alertBoxDiv,E(p,"VISIBILITY: "+e),t.style.visibility=e}function M(t,e){t=t||v.alertBoxDiv,void 0===e&&(e=!1),E(p,"ENABLE: "+e+" "+t.name),t.disabled=e}function P(t,e){if(void 0===e)return t;if(!T(e)||y(e)||"function"==typeof e)return t=e;for(var n in e)if(e.hasOwnProperty(n)){if(T(e[n])&&t[n]){t[n]=P(t[n],e[n]);continue}t[n]=e[n]}return t}function U(){var t="/*Begin BAlert default CSS classes*/";for(var e in f.defaultClasses.values)if(f.defaultClasses.values.hasOwnProperty(e)){t+="\n.bajs_"+e+" {";var n=f.defaultClasses.values[e].trim().split(";");for(var i in n)n[i]&&(t+="\n  "+n[i].trim()+";");t+="\n}\n"}return t+"/*End BAlert default CSS classes*/\n"}function F(t){function e(t,e,o){var a=t.attributes;if(i+=new Array(e*n).join(" ")+"<",o){for(var r="",s=0,l=a.length;s<l;s++)r+="\n"+new Array((e+1)*n).join(" ")+a[s].nodeName+"= '"+a[s].nodeValue+"'";i+=t.tagName+r}else i+="/"+t.tagName;i+=">\n"}var n=4,i="";return function t(n,i){for(e(n,i,!0),n=n.firstElementChild;n;)t(n,++i),e(n,i--,!1),n=n.nextElementSibling}(t,0),e(t,0,!1),i}function V(){f.callbacks.onResize&&f.callbacks.onResize(a)}function G(t){v.alertBoxDiv.contains(t.target)?(E(p,"CLICK INSIDE ALERT DETECTED"),f.callbacks.onTapInside&&f.callbacks.onTapInside(a)):(E(p,"CLICK OUTSIDE ALERT DETECTED"),f.callbacks.onTapOutside&&f.callbacks.onTapOutside(a))}function H(t){G(t)}function W(){"center"!==f.position.X&&"Center"!==f.position.X&&"C"!==f.position.X||(f.position.X="c"),"center"!==f.position.Y&&"Center"!==f.position.Y&&"C"!==f.position.Y||(f.position.Y="c"),f.iconsPath.length>0&&"/"!==f.iconsPath.charAt(f.iconsPath.length-1)&&(f.iconsPath+="/"),f.animStart||(f.animStart={duration:0,delay:0}),f.animExit||(f.animExit={duration:0,delay:0}),f.exitButton.raw?(f.exitButton.icon="",f.exitButton.text=""):f.exitButton.icon?f.exitButton.text="":f.exitButton.text||(f.exitButton.text="&times")}function j(t,e,n,i){void 0===i&&(i=""),E(p,"BUILDING "+e+i+" <"+n+">");var o=t.appendChild(document.createElement(n));return"BUTTON"===n&&(o.name=e+i),"IMG"===n&&(o.alt=""),o.id=e+i+"_"+s,o.className=f.defaultClasses.apply?"def_"+e+"_"+s:f.classPrefix+e,f.inlineStyles[e]&&(o.style.cssText+=";"+f.inlineStyles[e]),o}function _(t,e,n){var i;void 0===n?(i=f[e],n=""):i=f[e][n];var o=j(t,e,"BUTTON",n);return i.raw?o.innerHTML=i.raw:(i.icon&&(v[e+"Icon"+n]=j(o,e+"Icon","IMG",n),v[e+"Icon"+n].src=f.iconsPath+i.icon),i.text&&(v[e+"Text"+n]=j(o,e+"Text","SPAN",n),v[e+"Text"+n].innerHTML=i.text)),i.inlineStyle&&(o.style.cssText+=";"+i.inlineStyle),o.type="button",o.text=i.text,o.index=parseInt(n,10),o.name=e+n,v[e+n]=o,o.onclick=function(){f.DEBUG&p&&console.log(l+" BUTTON PRESSED: "+e+", text='"+o.text+"', keepAlert="+(i.keepAlert?"yes":"no")+", selfDim="+(i.selfDim?"yes":"no")+", selfDisable="+(i.selfDisable?"yes":"no")+", selfHide="+(i.selfHide?"yes":"no")+", selfRemove="+(i.selfRemove?"yes":"no")+", onClick="+(i.onClick?"f() is given":"null")),i.selfDim&&X(o),i.selfDisable&&M(o,!0),i.selfHide&&Y(o,"hidden"),i.selfRemove&&setTimeout(function(){A(o)},5),i.onClick&&i.onClick(a,o),i.keepAlert||it()},o}function J(){var t;E(g,"DEFAULT CSS CLASSES:\n"+U()+"\n"),E(m,"CONFIGURATION OPTIONS:\n"+JSON.stringify(f,null,4)+"\n\n"),E(p,"DOM BUILD STARTED"),f.defaultClasses.apply&&function(){(u=document.createElement("style")).type="text/css";var t="";for(var e in f.defaultClasses.values)f.defaultClasses.values.hasOwnProperty(e)&&(t+=".def_"+e+"_"+s+"{"+f.defaultClasses.values[e]+"}\n");u.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(u),E(p,"BUILDING DEFAULT DOM <style>")}(),t=document.getElementsByTagName("body")[0],v.containerDiv=j(t,"containerDiv","DIV"),v.containerDiv.style.height=R()+"px",v.containerDiv.style.zIndex=f.startingZIndex+r,v.containerDiv.style.position="absolute",v.alertBoxDiv=j(v.containerDiv,"alertBoxDiv","DIV"),v.alertBoxDiv.style.position="fixed",f.exitButton.visible="function"==typeof f.exitButton.visible?f.exitButton.visible(a):f.exitButton.visible,(f.title.text||f.title.icon||f.title.raw||f.exitButton.visible)&&(v.titleDiv=j(v.alertBoxDiv,"titleDiv","DIV"),f.title.raw?v.titleDiv.innerHTML=f.title.raw:(f.title.icon&&(v.titleIcon=j(v.titleDiv,"titleIcon","IMG"),v.titleIcon.src=f.iconsPath+f.title.icon),f.title.text&&(v.titleText=j(v.titleDiv,"titleText","SPAN"),v.titleText.innerHTML=f.title.text)),f.exitButton.visible&&(v.exitButton=_(v.titleDiv,"exitButton"))),(f.content.text||f.content.raw||f.content.icon)&&(v.contentDiv=j(v.alertBoxDiv,"contentDiv","DIV"),f.content.raw?v.contentDiv.innerHTML=f.content.raw:(f.content.icon&&(v.contentIcon=j(v.contentDiv,"contentIcon","IMG"),v.contentIcon.src=f.iconsPath+f.content.icon),f.content.text&&(v.contentText=j(v.contentDiv,"contentText","SPAN"),v.contentText.innerHTML=f.content.text))),function(){if(v.mainButtons=[],!B(f.mainButtons))for(var t in v.mainButtonsDiv=j(v.alertBoxDiv,"mainButtonsDiv","DIV"),f.mainButtons)f.mainButtons.hasOwnProperty(t)&&v.mainButtons.push(_(v.mainButtonsDiv,"mainButtons",t))}(),E(p,"DOM BUILD DONE"),E(h,"BROWSER DOM STRUCTURE:\n"+F(v.containerDiv)+"\n\n"),E(x,"INTERNAL DOM OBJECT STRUCTURE:\n"+JSON.stringify(v,null,4)+"\n\n"),Y(v.alertBoxDiv,"hidden"),function(){b(f.content.size)&&(f.content.size.X&&(f.content.size.calcX=Z({raw:f.content.size.X,dir:"h",negOpposite:!1})),f.content.size.Y&&(f.content.size.calcY=Z({raw:f.content.size.Y,dir:"v",negOpposite:!1})));f.content.size.calcX&&(v.contentDiv.style.width=f.content.size.calcX.val+f.content.size.calcX.unit);f.content.size.calcY&&(v.contentDiv.style.height=f.content.size.calcY.val+f.content.size.calcY.unit);b(f.size)&&(f.size.X&&(f.size.calcX=Z({raw:f.size.X,dir:"h",negOpposite:!1})),f.size.Y&&(f.size.calcY=Z({raw:f.size.Y,dir:"v",negOpposite:!1})));f.size.calcX&&(v.alertBoxDiv.style.width=f.size.calcX.val+f.size.calcX.unit);f.size.calcY&&(v.alertBoxDiv.style.height=f.size.calcY.val+f.size.calcY.unit)}(),K()}function K(t,e){void 0!==t&&(2===arguments.length?(f.position.X=t,f.position.Y=e):y(t)&&(f.position.X=t[0],f.position.Y=t[1]),E(p,"REQUEST MOVE TO: ["+f.position.X+","+f.position.Y+"]")),function(){f.position.calcX=Z({raw:f.position.X,dir:"h",negOpposite:!0}),f.position.calcY=Z({raw:f.position.Y,dir:"v",negOpposite:!0});var t=function(){var t=BAlert.alertArray,e=t.indexOf(a),n=1,i=1,o=a.getConf("position").X,r=a.getConf("position").Y;for(;t[e-n];)o===t[e-n].getConf("position").X&&r===t[e-n].getConf("position").Y&&i++,n+=1;return i}();f.position.calcX.val+=$({raw:f.position.staggerX,dir:"h",negOpposite:!1,size:t}).val,f.position.calcY.val+=$({raw:f.position.staggerY,dir:"v",negOpposite:!1,size:t}).val,v.alertBoxDiv.style.left=f.position.calcX.val+f.position.calcX.unit,v.alertBoxDiv.style.top=f.position.calcY.val+f.position.calcY.unit}(),E(p,"MOVED TO: ["+f.position.calcX.val+","+f.position.calcY.val+"]")}function Q(t){var e="h"===t.dir?k():R();return(t=function(t){var e;if(t.alt=!1,t.isPerc=!1,t.isNeg=!1,t.sign=1,t.unit="px","string"==typeof t.raw&&(t.raw=t.raw.trim()),t.centered=0!==(e=t.raw)&&!e||"c"===t.raw,!t.centered){t.alt="string"==typeof t.raw&&"~"===t.raw.charAt(0),t.alt&&(t.raw=t.raw.substring(1)),t.isPerc="string"==typeof t.raw&&"%"===t.raw.slice(-1),t.isPerc&&(t.raw=t.raw.slice(0,-1)),t.isNeg="string"==typeof t.raw&&"-"===t.raw.slice(0,1)||"number"==typeof t.raw&&t.raw<0,t.sign=t.isNeg?-1:1,t.absVal=Math.abs(parseFloat(t.raw))||0;var n="string"==typeof t.raw?/(\d+\.*\d*)(\D+$)/g.exec(t.raw):null;t.unit=n&&n.length>0?n[n.length-1]:"px"}return t}(t)).centered?t.val=e/2:(t.isPerc&&(t.absVal=t.absVal*e/100),t.isNeg&&t.negOpposite?t.val=e-t.absVal:t.val=t.absVal,t.negOpposite||(t.val*=t.sign),"rem"===t.unit&&(t.val=S(t.val)),t.unit="px"),t}function Z(t){var e=N(),n="h"===t.dir?e[0]:e[1];return(t=Q(t)).centered?t.val=t.val-n/2:t.isNeg&&t.negOpposite&&(t.val=t.val-n),t}function $(t){return 1===(t=Q(t)).size?t.val=0:t.alt?t.val=t.size%2==0?t.absVal:-t.absVal:t.val=(t.size-1)*t.absVal,t.val=t.val*t.sign,"rem"===t.unit&&(t.val=S(t.val)),t.unit="px",t}function q(t){var e,n,i,o,a=k(),r=R(),s=z(),l=s[0],c=s[1],u=N(),d=u[0],f=u[1],v=t.scale,m=l+d/2,h=c+f/2;if(y(t.dir))i=Q({raw:t.dir[0],dir:"h",negOpposite:!0}).val,o=Q({raw:t.dir[1],dir:"v",negOpposite:!0}).val;else switch(t.dir){case"left":i=-d*v/2,o=c+f/2;break;case"top":i=l+d/2,o=-f*v/2;break;case"right":i=a+d*v/2,o=c+f/2;break;case"bottom":i=l+d/2,o=r+f*v/2;break;case"top left":case"left top":i=-d*v/2,o=-f*v/2;break;case"top right":case"right top":i=a+d*v/2,o=-f*v/2;break;case"bottom left":case"left bottom":i=-d*v/2,o=r+f*v/2;break;case"bottom right":case"right bottom":i=a+d*v/2,o=r+f*v/2;break;case"left center":case"center left":i=-d*v/2,o=r/2;break;case"right center":case"center right":i=a+d*v/2,o=r/2;break;case"top center":case"center top":i=a/2,o=-f*v/2;break;case"bottom center":case"center bottom":i=a/2,o=r+f*v/2;break;case"center":case"center center":i=a/2,o=r/2;break;default:i=l+d/2,o=c+f/2}return E(p,"CALCULATED HIDING CENTER POSITION delta: ["+(e=i-m)+","+(n=o-h)+"]"),[e,n]}function tt(t){return"all "+t.duration/1e3+"s "+t.func}function et(t,e){var n=tt(t),i=function(t,e){return"translate("+e[0]+"px,"+e[1]+"px) scale("+t.scale+") "+(t.rotate?"rotate("+360*t.rotate+"deg)":"")}(t,e);E(p,"ANIM TRANSLATION: "+JSON.stringify(e)),E(p,"ANIM TRANSITION: "+n),E(p,"ANIM TRANSFORM: "+i),L(v.alertBoxDiv,"transform-origin","center"),L(v.alertBoxDiv,"transition",n),L(v.alertBoxDiv,"transform",i)}function nt(){var t=0;if(C(f.callbacks.onDisplayBegin,"onDisplayBegin"),f.animStart.duration){E(p,"BEGIN OF HIDE ANIMATE"),E(p,"CURRENT pos:"+JSON.stringify(z())),E(p,"CURRENT size:"+JSON.stringify(N()));var e=P({},f.animStart);e.rotate&&(e.rotate=-f.animStart.rotate),e.duration=0;var n=q(e);et(e,n),t=5,setTimeout(function(){E(p,"ANIMATE TO EXISTANCE ("+f.animStart.duration/1e3+"sec)"),Y(v.alertBoxDiv,"visible");var e=tt(f.animStart);L(v.alertBoxDiv,"transition",e),L(v.alertBoxDiv,"transform-origin","center"),L(v.alertBoxDiv,"transform",""),t+=f.animStart.duration,setTimeout(function(){E(p,"END OF START ANIMATE"),L(v.alertBoxDiv,"transition",""),d=O(f.timeout),C(f.callbacks.onDisplayEnd,"onDisplayEnd")},t)},t)}else Y(v.alertBoxDiv,"visible"),d=O(f.timeout),C(f.callbacks.onDisplayEnd,"onDisplayEnd");f.callbacks.onResize&&I("resize",V),setTimeout(function(){(f.callbacks.onTapOutside||f.callbacks.onTapInside)&&(I("touchstart",H,{passive:!1}),I("click",G))},5)}function it(t){(t=t||f.animExit.delay||0)>0?(f.DEBUG&p&&console.log(" DELAYED EXIT REQUESTED, delay(ms)="+t),setTimeout(function(){ot()},t)):ot()}function ot(){c=!0,d&&(clearTimeout(d),d=null),E(p,"BEGIN OF EXIT PROCESS"),C(f.callbacks.onExitBegin,"onExitBegin");var t=0;if(f.animExit.duration){E(p,"BEGIN OF EXIT ANIMATE ("+f.animExit.duration/1e3+"sec)");var e=q(f.animExit);et(f.animExit,e),t=f.animExit.duration}setTimeout(function(){f.animExit.duration&&E(p,"END OF EXIT ANIMATE"),f.callbacks.onResize&&w("resize",V),(f.callbacks.onTapOutside||f.callbacks.onTapInside)&&w("click",G),(f.callbacks.onTapOutside||f.callbacks.onTapInside)&&w("touchstart",H);var t=BAlert.alertArray.indexOf(a);-1!==t&&BAlert.alertArray.splice(t,1),C(f.callbacks.onExitEnd,"onExitEnd"),u&&(E(p,"DEFAULT DOM <style> REMOVED"),u.parentNode&&u.parentNode.removeChild(u)),E(p,"END OF EXIT"),A(v.containerDiv),E(p,"DESTROYED"),c=!1},t)}this.getConf=function(t){return t?f[t]:f},this.setConf=function(t,e){return 1===arguments.length?f=P(f,t):f[t]=P(f[t],e),this},this.noDefaultClasses=function(){return f.defaultClasses.apply=!1,this},this.getDefaultClasses=function(){return U()},this.setDefaultClasses=function(t,e){return 1===arguments.length?f.defaultClasses.values=e:f.defaultClasses.values[t]=e,this},this.setDebug=function(t){return t=t||0,f.DEBUG=t,this},this.setIconsPath=function(t){return f.iconsPath=t,this},this.build=function(){return W(),J(),this},this.display=function(t){return W(),function(t){t=t||f.animStart.delay||0,B(v)&&J();t?(E(p,"DELAYED START REQUESTED, delay(ms)="+t),setTimeout(function(){nt()},t)):nt()}(t),this},this.exit=function(t){return it(t),this},this.move=function(t,e){return K(t,e),this},this.enable=function(t){return M(t,!1),this},this.disable=function(t){return M(t,!0),this},this.hide=function(t){return Y(t,"hidden"),this},this.unhide=function(t){return Y(t,"visible"),this},this.dim=function(t,e){return X(t,e),this},this.undim=function(t){return X(t,1),this},this.remove=function(t){return A(t),this},this.getPosition=function(){return z()},this.getCenterPosition=function(t){return function(t){var e=(t=t||v.alertBoxDiv).getBoundingClientRect();return[e.left+e.width/2,e.top+e.height/2]}(t)},this.getSize=function(){return N()},this.getStructure=function(t){return F(t=t||v.containerDiv)},this.getElement=function(t){return v[t=t||"alertBoxDiv"]},this.merge=function(t,e){return P(t,e)},this.setCrossBrowserStyle=function(t,e,n){return L(t,e,n),this},this.reset=function(){return f=D(),v={},this},this.version=function(){return"2.6"},this.alertNum=function(){return r},this.conf=f,this.DOM=v};